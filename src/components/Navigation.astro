---
import { type Categories } from "../utils/microcms";
import CartIcon from "./CartIcon.svelte";
import Logo from "./Logo.astro";

export interface Props {
  className?: string;
  currentPage?: string;
  categories: Categories[];
}
const { className,currentPage, categories } = Astro.props as Props;
---

<nav class={`${className} text-[28px] leading-8 z-10`} x-data="{ open: false, contactOpen: false, modal: false }">
  <div class="absolute top-0 left-0 w-full h-full" x-show="modal" x-on:click="modal = false" x-transition />
    <div class="h-[100vh] flex flex-col justify-between pt-6 pb-12">
      <div class="flex flex-col gap-y-12">
        <h1 class="relative">
          <a href="/">
            <Logo />
          </a>
        </h1>
        <ul class="relative flex flex-col gap-y-4">
          <li class={`${currentPage == "product" && ("currentPage")}`}>
            <buttton class="cursor-pointer" x-on:click="open = ! open, modal = ! modal">Products</buttton>
          </li>
          <li class={`${currentPage == "designers" && ("currentPage")}`}>
            <a href="/designers">Designers</a>
          </li>
          <li class={`${currentPage == "series" && ("currentPage")}`}>
            <a href="/series">Series</a>
          </li>
          <li class={`${currentPage == "cart" && ("currentPage")}`}>
            <CartIcon client:load />
          </li>
          <div class="absolute -top-4 left-[140px] flex flex-col gap-y-4 bg-white p-4" x-show="open" x-on:click.away="open = false" x-cloak>
            <a href="/">ALL</a>
            {categories.map((category) => (
              <li class="whitespace-nowrap">
                <a href={`/categories/${category.id}`} class={`${currentPage == category.id && ("currentPage")}`}>{category.name}</a>
              </li>
            ))}
          </div>
        </ul>
      </div>
      <ul class="relative flex flex-col gap-y-4">
        <li class={`${currentPage == "about" && ("currentPage")}`}>
          <a href="/about">About</a>
        </li>
        <li class="relative">
          <buttton class="cursor-pointer" x-on:click="contactOpen = ! open, modal = ! modal">Contact</buttton>
          <div class="absolute -top-4 left-[120px] flex flex-col gap-y-4 bg-white p-4" x-show="contactOpen" x-on:click.away="contactOpen = false, modal = false" x-cloak>
            info@someroom.net
          </div>
        </li>
        <li>
          <a href="https://www.instagram.com/someroomdesign/" target="_blank" rel="noopener noreferrer">Instagram</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
